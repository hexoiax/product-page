<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Qu·∫ßn Li·ªÅn ·ª¶ng Cao Su 2 L·ªõp Ch·ªëng N∆∞·ªõc - Gi·ªØ ·∫§m</title>

<style>
:root {
  --green-main: #2ECC71;
  --green-dark: #1FA85C;
  --pastel-1: #ffe7c7;
  --pastel-2: #e8fff4;
}

/* GENERAL */
html, body {
  overflow-x: hidden;
  margin: 0;
  background: #f8fff9;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  color: #111827;
}

/* Fade-in */
.fade {
  opacity: 0;
  animation: fadeIn 0.9s ease forwards;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* PRODUCT LAYOUT */
.product-intro {
  display: flex;
  gap: 30px;
  padding: 30px;
  max-width: 1100px;
  margin: 72px auto 20px auto;
  border-radius: 18px;
  background: #ffffff;
  box-shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
}

/* CAROUSEL */
.carousel-wrapper {
  position: relative;
  width: 100%;
  max-width: 430px;
  overflow: hidden;
  border-radius: 18px;
  background: #f7fff8;
  box-shadow: 0 14px 32px rgba(15, 23, 42, 0.12);
}

.loop-carousel {
  position: relative;
  padding: 15px 0 26px;
}
.loop-track {
  display: flex;
  transition: transform .35s ease;
  will-change: transform;
}

.loop-slide {
  width: 80vw;
  max-width: 350px;
  flex-shrink: 0;
  margin-right: 16px;
}
.loop-slide img {
  width: 100%;
  border-radius: 16px;
  object-fit: cover;
  transition: transform .35s ease, opacity .35s ease;
  will-change: transform, opacity;
}

.loop-slide.active img {
  transform: scale(1);
  opacity: 1;
}
.loop-slide:not(.active) img {
  transform: scale(.92);
  opacity: .8;
}

/* Caption d∆∞·ªõi ·∫£nh */
.caption {
  font-size: 17px;
  font-weight: 700;
  color: #064e3b;
  opacity: 0;
  transform: translateY(8px);
  transition: opacity .35s ease, transform .35s ease;
  width: 80%;
  margin: 10px auto 0 auto;
  text-align: center;
}
.loop-slide.active .caption {
  opacity: 1;
  transform: translateY(0);
}

/* PRODUCT INFO */
.product-info {
  flex: 1;
}

.badge {
  display: inline-flex;
  gap: 6px;
  padding: 6px 14px;
  border-radius: 999px;
  background: radial-gradient(circle at top left, var(--pastel-1), var(--pastel-2));
  box-shadow: 0 8px 18px rgba(15, 23, 42, 0.1);
  font-size: 13px;
  font-weight: 600;
  margin-bottom: 10px;
}

.price-box {
  display: flex;
  gap: 12px;
  align-items: center;
  margin-bottom: 16px;
}
.final-price {
  font-size: 32px;
  font-weight: 800;
  color: #065f46;
}
.original-price {
  text-decoration: line-through;
  color: #6b7280;
}
.discount-red {
  padding: 4px 10px;
  background: #fee2e2;
  color: #b91c1c;
  border-radius: 999px;
  font-weight: 700;
}

.gift-box {
  background: #f0fff4;
  padding: 14px;
  border-radius: 14px;
  border: 1px dashed var(--green-main);
  margin-bottom: 15px;
  color: #166534;
  font-size: 14px;
}

.notice {
  font-size: 14px;
  margin-bottom: 22px;
  font-weight: 600;
  color: #064e3b;
}

/* ORDER BUTTON */
.order-btn-wrapper {
  text-align: center;
}

.order-btn {
  background: linear-gradient(90deg, #2ECC71, #1FA85C);
  padding: 18px 30px;
  border-radius: 45px;
  color: white;
  cursor: pointer;
  font-weight: 700;
  display: inline-block;
  box-shadow: 0 12px 26px rgba(34, 197, 94, 0.5);
  transition: transform .2s ease, box-shadow .2s ease;
  will-change: transform;
}
.order-btn:hover {
  transform: translateY(-3px) scale(1.01);
  box-shadow: 0 14px 30px rgba(22, 163, 74, 0.55);
}
.order-btn:active {
  transform: translateY(0) scale(0.97);
  box-shadow: 0 8px 18px rgba(22, 163, 74, 0.45);
}
.btn-title {
  font-size: 19px;
  font-weight: 800;
}
.btn-sub {
  font-size: 13px;
  opacity: .95;
  margin-top: 2px;
}

.guarantee {
  text-align: center;
  font-size: 13px;
  margin-top: 18px;
  color: #166534;
  font-style: italic;
}

/* FORM INPUT */
.form-input {
  width: 100%;
  padding: 12px 14px;
  margin-bottom: 10px;
  border: none;
  border-radius: 12px;
  background: white;
  outline: none;
  box-shadow: 0 0 0 1px #e5e7eb;
  font-size: 15px;
  box-sizing: border-box;
}
textarea.form-input {
  height: 70px;
  resize: none;
}

/* SIZE CHIP */
.size-chip {
  padding: 8px 14px;
  border: 1px solid #d1d5db;
  border-radius: 18px;
  background: white;
  cursor: pointer;
  font-size: 15px;
  transition: background .15s ease, color .15s ease, border-color .15s ease, transform .1s ease;
  user-select: none;
}
.size-chip.selected {
  background: #16a34a;
  color: white;
  border-color: #16a34a;
  transform: translateY(-1px);
}
.size-chip:active {
  transform: scale(0.96);
}

/* POPUP OVERLAY */
.popup-overlay {
  position: fixed;
  inset: 0;
  background: rgba(15, 23, 42, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity .25s ease;
  z-index: 9999;
}
.popup-overlay.active {
  opacity: 1;
  pointer-events: auto;
}
.popup-box {
  max-width: 420px;
  width: 100%;
  padding: 18px 20px 20px;
  background: #f3f4f6;
  border-radius: 18px;
  transform: scale(.94);
  opacity: 0;
  transition: transform .25s ease, opacity .25s ease;
  box-shadow: 0 16px 40px rgba(15, 23, 42, 0.25);
}
.popup-overlay.active .popup-box {
  transform: scale(1);
  opacity: 1;
}

/* SUCCESS POPUP */
#success-popup {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(15, 23, 42, 0.5);
  align-items: center;
  justify-content: center;
  z-index: 10000;
}
.tick-circle {
  width: 84px;
  height: 84px;
  border-radius: 50%;
  background-color: #16a34a;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: pulse 1.6s infinite;
}
@keyframes pulse {
  0% {
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.45);
  }
  70% {
    transform: scale(1.06);
    box-shadow: 0 0 0 12px rgba(34, 197, 94, 0);
  }
  100% {
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);
  }
}

/* GLOBAL FOCUS FIX (bo vi·ªÅn xanh) */
*:focus,
*:active,
*:focus-visible {
  outline: none !important;
}

/* Mobile tap highlight */
* {
  -webkit-tap-highlight-color: rgba(0,0,0,0);
}

/* KH·ªêI TH·ª® 2 ‚Äì REVIEW SECTION */
.section-tabs {
  max-width: 1100px;
  margin: 24px auto;
  background: #fff;
  border-radius: 18px;
  padding: 20px;
  box-shadow: 0 10px 28px rgba(15, 23, 42, 0.08);
}

/* TAB HEADER */
.tab-header {
  display: flex;
  gap: 10px;
  border-bottom: 2px solid #e5e7eb;
  margin-bottom: 20px;
}
.tab-btn {
  flex: 1;
  text-align: center;
  padding: 14px 0;
  font-size: 17px;
  cursor: pointer;
  font-weight: 600;
  background: #f9fafb;
  color: #6b7280;
  border-radius: 12px 12px 0 0;
  transition: background .2s ease, color .2s ease, transform .2s ease, box-shadow .2s ease;
  transform: scale(1);
  opacity: 0.75;
}
.tab-btn.active {
  background: #ffffff;
  color: #111827;
  transform: scale(1.04);
  opacity: 1;
  box-shadow: 0 8px 20px rgba(15, 23, 42, 0.10);
}

/* TAB CONTENT */
.tab-content {
  opacity: 0;
  transform: translateX(16px) scale(.98);
  transition: opacity .35s ease, transform .35s ease;
  display: none;
}
.tab-content.active {
  display: block;
  opacity: 1;
  transform: translateX(0) scale(1);
}

/* RATING SUMMARY */
.rating-summary-box {
  display: flex;
  gap: 20px;
  margin-bottom: 22px;
}
.rating-left {
  text-align: center;
}
.avg-score {
  font-size: 42px;
  font-weight: 800;
  color: #065f46;
}
.avg-stars {
  font-size: 20px;
  color: #FBBF24;
}
.total-reviews {
  font-size: 14px;
  color: #6b7280;
}

/* BARS */
.rating-bars {
  flex: 1;
}
.bar-line {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 6px;
  font-size: 14px;
}
.bar {
  background: #e5e7eb;
  flex: 1;
  height: 8px;
  border-radius: 999px;
  overflow: hidden;
}
.bar div {
  height: 8px;
  background: #1FA85C;
}

/* REVIEW LIST + SLIDER */
.review-slider {
  overflow: hidden;
  position: relative;
}
.review-track {
  display: flex;
  transition: transform .35s ease;
  will-change: transform;
}
.review-slide {
  min-width: 100%;
  box-sizing: border-box;
  padding-right: 10px;
}
.review-item {
  display: flex;
  gap: 14px;
  margin-bottom: 20px;
}
.review-avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
}
.review-body {
  flex: 1;
}
.review-name {
  font-weight: 700;
  margin-bottom: 2px;
}
.review-stars {
  font-size: 14px;
  color: #FBBF24;
  margin-bottom: 6px;
}
.review-text {
  font-size: 15px;
  margin-bottom: 8px;
}
.review-img {
  width: 120px;
  border-radius: 12px;
  cursor: pointer;
  transition: transform .2s ease, box-shadow .2s ease;
  box-shadow: 0 4px 10px rgba(15, 23, 42, 0.08);
}
.review-img:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 22px rgba(15, 23, 42, 0.18);
}

/* ZOOM ·∫¢NH */
#zoomOverlay {
  position: fixed;
  inset: 0;
  background: rgba(15, 23, 42, 0.88);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 99999;
}
#zoomOverlay img {
  width: 90%;
  max-width: 500px;
  border-radius: 10px;
}

/* N√öT XEM TH√äM */
.btn-more {
  display: block;
  margin: 25px auto 0 auto;
  text-align: center;
  background: linear-gradient(90deg, #2ECC71, #1FA85C);
  padding: 12px 32px;
  border-radius: 40px;
  color: white;
  font-weight: 700;
  cursor: pointer;
  width: fit-content;
  box-shadow: 0 10px 26px rgba(34, 197, 94, 0.45);
  transition: transform .15s ease, box-shadow .15s ease;
}
.btn-more:active {
  transform: scale(.95);
  box-shadow: 0 6px 18px rgba(34, 197, 94, 0.4);
}

/* FLASH SALE BOX */
.flash-sale-box {
  background: linear-gradient(90deg, #2ECC71, #1FA85C);
  padding: 12px 14px;
  border-radius: 12px;
  color: #fff;
  font-family: inherit;
  margin: 12px 6px 12px 0;
  width: calc(100% - 6px);
  box-sizing: border-box;
  box-shadow: 0 8px 22px rgba(34, 197, 94, 0.45);
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.fs-left {
  font-size: 15px;
  font-weight: 700;
}
.fs-sub {
  font-size: 12px;
  opacity: 0.9;
  margin-top: 2px;
}
.fs-count {
  font-size: 18px;
  font-weight: 700;
  background: rgba(255,255,255,0.18);
  padding: 7px 12px;
  border-radius: 8px;
  min-width: 88px;
  text-align: center;
  letter-spacing: 1px;
}

/* RATING LIQUID UNDER TITLE */
.rating-liquid {
  display: inline-flex;
  align-items: flex-end;
  font-weight: 600;
  cursor: pointer;
  gap: 4px;
  margin: 8px 0 6px 0;
}
.rating-wrapper {
  position: relative;
  display: inline-block;
  line-height: 1.2;
}
.flow-line {
  position: absolute;
  bottom: -3px;
  left: 0;
  height: 2px;
  width: 100%;
  overflow: hidden;
}
.flow-line::before {
  content: "";
  position: absolute;
  height: 100%;
  background: #22c55e;
  border-radius: 2px;
  animation: lineFlow 2.4s linear infinite, linePulse 2.4s ease-in-out infinite;
}
@keyframes lineFlow {
  0%   { left: 0%;   width: 0%; }
  20%  { left: 0%;   width: 65%; }
  50%  { left: 25%;  width: 70%; }
  80%  { left: 70%;  width: 35%; }
  100% { left: 100%; width: 0%; }
}
@keyframes linePulse {
  0%, 100% { transform: scaleY(1); }
  50%      { transform: scaleY(1.5); }
}
.rating-liquid.fill .flow-line::before {
  animation: none;
  left: 0;
  width: 100%;
  transform: scaleY(1.6);
  transition: width 0.35s ease-out;
}

/* CART HOT ICON tr√™n ·∫£nh */
#cartHotIcon {
  position: absolute;
  top: 0;
  left: 0;
  background: #f97316;
  color: white;
  padding: 9px 18px 9px 20px;
  font-size: 15px;
  font-weight: 800;
  border-radius: 0 0 999px 0;
  box-shadow: 0 6px 18px rgba(15, 23, 42, 0.28);
  z-index: 10;
  pointer-events: none;
}

/* TOP NOTICE BAR */
#topNoticeBar {
  width: 100%;
  background: linear-gradient(92deg, #2ECC71 0%, #1FA85C 100%);
  color: white;
  text-align: center;
  padding: 10px 16px;
  font-size: 15px;
  font-weight: 600;
  font-family: inherit;
  position: fixed;
  top: 0;
  z-index: 9999;
  opacity: 0;
  transform: translateY(-14px) scale(0.98);
  backdrop-filter: blur(8px);
  transition: opacity .55s ease, transform .55s cubic-bezier(.16, .68, .43, 1.01);
}
#topNoticeBar.show {
  opacity: 1;
  transform: translateY(0) scale(1);
}
#noticeText {
  display: inline-block;
  opacity: 0;
  transform: translateY(6px);
  transition: opacity .45s ease, transform .45s ease;
}
#noticeText.showText {
  opacity: 1;
  transform: translateY(0);
}
@media (max-width: 480px) {
  #noticeText {
    font-size: 13px !important;
    white-space: nowrap;
  }
}

/* FLOATING ORDER BUTTON ‚Äì 50% SCREEN BOTTOM RIGHT */
#floatingOrderBtn {
  position: fixed;
  bottom: 0;
  right: 0;
  width: 50%;
  z-index: 9990;
  opacity: 0;
  pointer-events: none;
  transform: translateY(20px);
  transition: opacity .35s ease, transform .35s ease;
}
#floatingOrderBtn.show {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0);
}
.floating-btn {
  width: 100%;
  background: linear-gradient(90deg, #2ECC71, #1FA85C);
  padding: 18px 18px;
  border-radius: 24px 0 0 0;
  box-shadow: -8px -8px 24px rgba(15, 23, 42, 0.25);
  color: #fff;
  font-family: inherit;
  cursor: pointer;
  display: flex;
  flex-direction: column;
  gap: 4px;
  transition: transform .18s ease, box-shadow .18s ease;
}
.floating-btn:active {
  transform: scale(.97);
  box-shadow: -4px -4px 18px rgba(15, 23, 42, 0.26);
}
.floating-btn .btn-title {
  font-size: 20px;
  font-weight: 800;
  line-height: 1.1;
  letter-spacing: .2px;
}
.floating-btn .btn-sub {
  font-size: 14px;
  opacity: 0.96;
}

/* PURCHASE POPUP (fake order) */
.purchase-popup {
  position: fixed;
  top: 20px;
  right: 20px;
  display: flex;
  align-items: center;
  gap: 12px;
  background: #ffffff;
  padding: 12px 16px;
  border-radius: 14px;
  box-shadow: 0 12px 32px rgba(15, 23, 42, 0.18);
  border: 1px solid #e5e7eb;
  opacity: 0;
  transform: translateX(20px);
  transition: opacity .45s cubic-bezier(.16,.68,.43,1.01), transform .45s cubic-bezier(.16,.68,.43,1.01);
  z-index: 9999;
  pointer-events: none;
}
.purchase-popup.show {
  opacity: 1;
  transform: translateX(0);
}
.purchase-avatar {
  width: 44px;
  height: 44px;
  border-radius: 50%;
}
.purchase-info {
  font-size: 14px;
  color: #374151;
  line-height: 1.35;
}
.purchase-info b {
  color: #065f46;
}
.purchase-time {
  font-size: 12px;
  color: #6b7280;
}

/* SAFE BOTTOM SPACE */
.safe-bottom-space {
  height: 80px;
}

/* FADE SCROLL */
.fade-scroll {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity .8s ease, transform .8s ease;
}
.fade-scroll.show {
  opacity: 1;
  transform: translateY(0);
}

/* VIDEO REVIEW SECTION */
.video-section {
  max-width: 1100px;
  margin: 32px auto 10px auto;
  background: #fff;
  border-radius: 18px;
  padding: 22px;
  box-shadow: 0 10px 28px rgba(15, 23, 42, 0.08);
  display: flex;
  gap: 26px;
  opacity: 0;
  transform: translateY(20px);
  transition: opacity .7s ease, transform .7s ease;
}
.video-section.show {
  opacity: 1;
  transform: translateY(0);
}
.video-left {
  width: 45%;
}
.video-left video {
  width: 100%;
  aspect-ratio: 6/19;
  border-radius: 18px;
  box-shadow: 0 10px 24px rgba(15, 23, 42, 0.18);
  object-fit: cover;
  cursor: pointer;
}
.video-right {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
}
.video-title {
  font-size: 22px;
  font-weight: 800;
  color: #064e3b;
  margin-bottom: 8px;
}
.video-desc {
  font-size: 15px;
  color: #374151;
  line-height: 1.6;
  opacity: 0.9;
}
.video-dots {
  display: flex;
  gap: 10px;
  margin-top: 18px;
}
.dot {
  width: 12px;
  height: 12px;
  background: #d1d5db;
  border-radius: 50%;
  cursor: pointer;
  transition: background .25s ease, transform .25s ease, box-shadow .25s ease;
}
.dot.active {
  background: #22c55e;
  transform: scale(1.2);
  box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.25);
}

/* RESPONSIVE */
@media(max-width: 768px) {
  .product-intro {
    flex-direction: column;
    padding: 20px;
    margin-top: 80px;
  }
  .carousel-wrapper {
    max-width: 100%;
  }
/* --- VIDEO REVIEW: Mobile Layout 70/30 --- */
@media(max-width: 768px) {

  /* Video Section chung 1 h√†ng */
  #videoSection.video-section {
    flex-direction: row !important;
    gap: 14px;
  }

  /* Video chi·∫øm 70% */
  .video-left {
    width: 70% !important;
  }

  /* Text chi·∫øm 30% */
  .video-right {
    width: 30% !important;
  }

  /* Thu nh·ªè n·ªôi dung text */
  .video-title {
    font-size: 16px;
    line-height: 1.3;
  }

  .video-desc {
    font-size: 13px;
    line-height: 1.4;
  }

  /* Dot nh·ªè l·∫°i */
  .video-dots .dot {
    width: 10px;
    height: 10px;
  }
}

  .purchase-popup {
    right: 10px;
    left: 10px;
  }
}
</style>
</head>

<body>

<!-- FLOATING ORDER BUTTON -->
<div id="floatingOrderBtn">
  <div class="floating-btn">
    <div class="btn-title">ƒê·∫∑t h√†ng ngay</div>
    <div class="btn-sub">Mi·ªÖn ph√≠ ship to√†n qu·ªëc</div>
  </div>
</div>

<!-- AUTO PURCHASE POPUP -->
<div id="purchasePopup" class="purchase-popup">
  <img id="purchaseAvatar" class="purchase-avatar" alt="avatar">
  <div class="purchase-info">
    <b id="purchaseName">Kh√°ch h√†ng</b> v·ª´a ƒë·∫∑t<br>
    <span class="purchase-time">1 gi√¢y tr∆∞·ªõc</span>
  </div>
</div>

<!-- TOP NOTICE BAR -->
<div id="topNoticeBar">
  <span id="noticeText"></span>
</div>

<!-- PRODUCT MAIN BLOCK -->
<div class="product-intro fade">

  <!-- SLIDER -->
  <div class="carousel-wrapper">
    <div id="cartHotIcon">288+ ƒë√£ mua 24h</div>
    <div class="loop-carousel">
      <div class="loop-track" id="track">

        <!-- Clone Last -->
        <div class="loop-slide clone">
          <img src="https://ik.imagekit.io/7q6vhb7ce/sizechart%20copy.jpg?tr=w-900,q-75,f-webp" alt="Size chart">
          <div class="caption">Ch·ªçn size ƒë√∫ng ƒë·ªÉ tho·∫£i m√°i nh·∫•t</div>
        </div>

        <!-- REAL SLIDES -->
        <div class="loop-slide">
          <img src="https://ik.imagekit.io/7q6vhb7ce/A.jpg?tr=w-900,q-75,f-webp" alt="Ph√π h·ª£p nam n·ªØ">
          <div class="caption">Ph√π h·ª£p nam & n·ªØ</div>
        </div>

        <div class="loop-slide">
          <img src="https://ik.imagekit.io/7q6vhb7ce/B.jpg?tr=w-900,q-75,f-webp" alt="Ch·ªëng th·∫•m n∆∞·ªõc">
          <div class="caption">Ch·ªëng th·∫•m n∆∞·ªõc tuy·ªát ƒë·ªëi</div>
        </div>

        <div class="loop-slide">
          <img src="https://ik.imagekit.io/7q6vhb7ce/C.jpg?tr=w-900,q-75,f-webp" alt="ƒê∆∞·ªùng √©p nhi·ªát">
          <div class="caption">ƒê∆∞·ªùng √©p nhi·ªát li·ªÅn m·∫°ch</div>
        </div>

        <div class="loop-slide">
          <img src="https://ik.imagekit.io/7q6vhb7ce/D.jpg?tr=w-900,q-75,f-webp" alt="H√¨nh ·∫£nh th·∫≠t cao su √©p nhi·ªát">
          <div class="caption">H√¨nh ·∫£nh th·∫≠t ‚Äì cao su √©p nhi·ªát</div>
        </div>

        <div class="loop-slide">
          <img src="https://ik.imagekit.io/7q6vhb7ce/h.jpg?tr=w-900,q-75,f-webp" alt="D√†y 2 l·ªõp gi·ªØ ·∫•m">
          <div class="caption">D√†y 2 l·ªõp ‚Äì gi·ªØ ·∫•m</div>
        </div>

        <div class="loop-slide">
          <img src="https://ik.imagekit.io/7q6vhb7ce/F.jpg?tr=w-900,q-75,f-webp" alt="Kh·ªõp n·ªëi">
          <div class="caption">Kh·ªõp n·ªëi ch·∫Øc ch·∫Øn</div>
        </div>

        <div class="loop-slide">
          <img src="https://ik.imagekit.io/7q6vhb7ce/E.jpg?tr=w-900,q-75,f-webp" alt="ƒê·∫ø nguy√™n kh·ªëi">
          <div class="caption">ƒê·∫ø nguy√™n kh·ªëi ‚Äì b·ªÅn ch·∫Øc</div>
        </div>

        <div class="loop-slide">
          <img src="https://ik.imagekit.io/7q6vhb7ce/G.jpg?tr=w-900,q-75,f-webp" alt="Ch·ªëng tr∆°n">
          <div class="caption">Ch·ªëng tr∆°n tr∆∞·ª£t</div>
        </div>

        <!-- Size chart -->
        <div class="loop-slide">
          <img src="https://ik.imagekit.io/7q6vhb7ce/sizechart%20copy.jpg?tr=w-900,q-75,f-webp" alt="Size chart">
          <div class="caption">Ch·ªçn size ƒë√∫ng ƒë·ªÉ tho·∫£i m√°i nh·∫•t</div>
        </div>

        <!-- Clone First -->
        <div class="loop-slide clone">
          <img src="https://ik.imagekit.io/7q6vhb7ce/A.jpg?tr=w-900,q-75,f-webp" alt="Ph√π h·ª£p nam & n·ªØ">
          <div class="caption">Ph√π h·ª£p nam & n·ªØ</div>
        </div>
      </div>
    </div>
  </div>

  <!-- PRODUCT INFO -->
  <div class="product-info">

    <div class="badge">‚òÖ Best Seller ‚Ä¢ S·∫£n ph·∫©m b√°n ch·∫°y</div>

    <h1 style="color:#064e3b; font-size:26px; margin:0 0 4px 0;">
      Qu·∫ßn Li·ªÅn ·ª¶ng Cao Su 2 L·ªõp Ch·ªëng N∆∞·ªõc - Gi·ªØ ·∫§m
    </h1>

    <!-- Rating liquid -->
    <div id="rating-liquid" class="rating-liquid">
      ‚≠ê
      <span class="rating-wrapper">
        4.9/5 ‚Ä¢ 18,200 l∆∞·ª£t b√°n
        <span class="flow-line"></span>
      </span>
    </div>

    <!-- FLASH SALE -->
    <div id="flash-sale" class="flash-sale-box">
      <div class="fs-left">
        üî• ∆ØU ƒê√ÉI GI·ªú V√ÄNG GI·∫¢M 35%
        <div class="fs-sub">K·∫øt th√∫c sau:</div>
      </div>
      <div id="countdown" class="fs-count">--:--:--</div>
    </div>

    <!-- PRICE BOX -->
    <div class="price-box">
      <div class="final-price">130.000ƒë</div>
      <div class="original-price">200.000ƒë</div>
      <div class="discount-red">-35%</div>
    </div>

    <div class="gift-box">
      üéÅ T·∫∑ng 1 ƒë√¥i gƒÉng tay<br>
      ‚ù§Ô∏è ∆Øu ƒë√£i 20% ‚Äì s·ªë l∆∞·ª£ng c√≥ h·∫°n
    </div>

    <div class="notice">‚ö† L∆∞u √Ω ƒë·∫∑t h√†ng theo size ch√¢n c·ªßa b·∫°n</div>

    <div class="order-btn-wrapper">
      <div class="order-btn" id="openPopup">
        <div class="btn-title">ƒê·∫∑t h√†ng ngay</div>
        <div class="btn-sub">Mi·ªÖn ph√≠ ship to√†n qu·ªëc</div>
      </div>
    </div>

    <div class="guarantee">
      * N·∫øu kh√¥ng h√†i l√≤ng, c·ª≠a h√†ng h·ªó tr·ª£ ƒë·ªïi tr·∫£ trong 7 ng√†y
    </div>

  </div>
</div>

<!-- KH·ªêI ƒê√ÅNH GI√Å -->
<div class="section-tabs fade-scroll" id="reviewSection">

  <!-- TAB HEADER -->
  <div class="tab-header">
    <div class="tab-btn active" data-tab="reviews">ƒê√°nh gi√°</div>
    <div class="tab-btn" data-tab="description">M√¥ t·∫£ s·∫£n ph·∫©m</div>
  </div>

  <!-- TAB: ƒê√ÅNH GI√Å -->
  <div id="tab-reviews" class="tab-content active">

    <!-- BI·ªÇU ƒê·ªí ƒê√ÅNH GI√Å -->
    <div class="rating-summary-box">
      <div class="rating-left">
        <div class="avg-score">4.9</div>
        <div class="avg-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
        <div class="total-reviews">8,000 ƒë√°nh gi√°</div>
      </div>

      <div class="rating-bars">
        <div class="bar-line"><span>5 ‚≠ê</span><div class="bar"><div style="width:95%"></div></div></div>
        <div class="bar-line"><span>4 ‚≠ê</span><div class="bar"><div style="width:4%"></div></div></div>
        <div class="bar-line"><span>3 ‚≠ê</span><div class="bar"><div style="width:1%"></div></div></div>
        <div class="bar-line"><span>2 ‚≠ê</span><div class="bar"><div style="width:0%"></div></div></div>
        <div class="bar-line"><span>1 ‚≠ê</span><div class="bar"><div style="width:0%"></div></div></div>
      </div>
    </div>

    <!-- REVIEW SLIDER -->
    <div class="review-slider">
      <div class="review-track" id="reviewTrack">

        <!-- SLIDE 1 -->
        <div class="review-slide">
          <div class="review-item">
            <img src="https://i.pravatar.cc/80?img=1" class="review-avatar" alt="avatar 1">
            <div class="review-body">
              <div class="review-name">Nguy·ªÖn Ho√†ng Minh</div>
              <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
              <div class="review-text">·ª¶ng d√†y, ch·ªëng n∆∞·ªõc c·ª±c t·ªët.</div>
              <img src="https://ik.imagekit.io/7q6vhb7ce/A.jpg?tr=w-400" class="review-img zoom-img" alt="review 1">
            </div>
          </div>

          <div class="review-item">
            <img src="https://i.pravatar.cc/80?img=2" class="review-avatar" alt="avatar 2">
            <div class="review-body">
              <div class="review-name">H·ªìng √Ånh</div>
              <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
              <div class="review-text">ƒêi ru·ªông ·∫•m ch√¢n, kh√¥ng b·ªã l·∫°nh n·ªØa.</div>
            </div>
          </div>
        </div>

        <!-- SLIDE 2 -->
        <div class="review-slide">
          <div class="review-item">
            <img src="https://i.pravatar.cc/80?img=3" class="review-avatar" alt="avatar 3">
            <div class="review-body">
              <div class="review-name">ƒêƒÉng Qu√¢n</div>
              <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
              <div class="review-text">ƒê·∫ø ch·∫Øc ch·∫Øn, kh√¥ng tr∆°n.</div>
              <img src="https://ik.imagekit.io/7q6vhb7ce/h.jpg?tr=w-400" class="review-img zoom-img" alt="review 2">
            </div>
          </div>

          <div class="review-item">
            <img src="https://i.pravatar.cc/80?img=4" class="review-avatar" alt="avatar 4">
            <div class="review-body">
              <div class="review-name">Thu√Ω Vy</div>
              <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
              <div class="review-text">ƒê√°ng ti·ªÅn l·∫Øm, giao nhanh.</div>
            </div>
          </div>
        </div>

        <!-- SLIDE 3 -->
        <div class="review-slide">
          <div class="review-item">
            <img src="https://i.pravatar.cc/80?img=5" class="review-avatar" alt="avatar 5">
            <div class="review-body">
              <div class="review-name">T·∫•n Ph√°t</div>
              <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
              <div class="review-text">Form ƒë·∫πp, nam mang tho·∫£i m√°i.</div>
              <img src="https://ik.imagekit.io/7q6vhb7ce/C.jpg?tr=w-400" class="review-img zoom-img" alt="review 3">
            </div>
          </div>

          <div class="review-item">
            <img src="https://i.pravatar.cc/80?img=6" class="review-avatar" alt="avatar 6">
            <div class="review-body">
              <div class="review-name">Qu·ª≥nh Nh∆∞</div>
              <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
              <div class="review-text">M·∫∑c ·∫•m c·ª±c, x·ª©ng ƒë√°ng.</div>
            </div>
          </div>
        </div>

        <!-- SLIDE 4 -->
        <div class="review-slide">
          <div class="review-item">
            <img src="https://i.pravatar.cc/80?img=7" class="review-avatar" alt="avatar 7">
            <div class="review-body">
              <div class="review-name">B√≠ch H·∫±ng</div>
              <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
              <div class="review-text">Ch·∫•t cao su d√†y, th√≠ch l·∫Øm.</div>
              <img src="https://ik.imagekit.io/7q6vhb7ce/G.jpg?tr=w-400" class="review-img zoom-img" alt="review 4">
            </div>
          </div>

          <div class="review-item">
            <img src="https://i.pravatar.cc/80?img=8" class="review-avatar" alt="avatar 8">
            <div class="review-body">
              <div class="review-name">Minh T√¢m</div>
              <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
              <div class="review-text">Ch·ªëng th·∫•m c·ª±c t·ªët.</div>
            </div>
          </div>
        </div>

        <!-- SLIDE 5 -->
        <div class="review-slide">
          <div class="review-item">
            <img src="https://i.pravatar.cc/80?img=9" class="review-avatar" alt="avatar 9">
            <div class="review-body">
              <div class="review-name">Thanh S∆°n</div>
              <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
              <div class="review-text">ƒêi r·∫´y ·∫•m ch√¢n, kh√¥ng m·ªèi.</div>
              <img src="https://ik.imagekit.io/7q6vhb7ce/E.jpg?tr=w-400" class="review-img zoom-img" alt="review 5">
            </div>
          </div>

          <div class="review-item">
            <img src="https://i.pravatar.cc/80?img=10" class="review-avatar" alt="avatar 10">
            <div class="review-body">
              <div class="review-name">Tr√† My</div>
              <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
              <div class="review-text">S·∫£n ph·∫©m nh∆∞ m√¥ t·∫£.</div>
            </div>
          </div>
        </div>

      </div>

      <!-- BUTTON XEM TH√äM -->
      <div class="btn-more" id="btnMore">Xem th√™m</div>
    </div>
  </div>

  <!-- TAB: M√î T·∫¢ S·∫¢N PH·∫®M -->
  <div id="tab-description" class="tab-content">
    <div class="desc-box">
      <h3>M√¥ t·∫£ s·∫£n ph·∫©m</h3>
      <p>
        Qu·∫ßn li·ªÅn ·ªßng cao su 2 l·ªõp √©p nhi·ªát ch·ªëng n∆∞·ªõc tuy·ªát ƒë·ªëi, gi·ªØ ·∫•m t·ªët khi ƒëi ru·ªông, ƒëi r·ª´ng, l√†m n√¥ng nghi·ªáp.
        ƒê·∫ø nguy√™n kh·ªëi ch·∫Øc ch·∫Øn, ch·ªëng tr∆°n tr∆∞·ª£t, ph√π h·ª£p c·∫£ nam v√† n·ªØ.
      </p>
    </div>
  </div>

</div>

<!-- ZOOM ·∫¢NH -->
<div id="zoomOverlay">
  <img id="zoomImage" alt="zoom">
</div>

<!-- POPUP FORM -->
<div id="orderPopup" class="popup-overlay">
  <div class="popup-box" id="orderBox">
    <h2 style="text-align:center;margin-bottom:16px;font-size:22px;">ƒê·∫∂T H√ÄNG NGAY</h2>

    <input id="name" type="text" placeholder="T√™n kh√°ch h√†ng" class="form-input">
    <input id="phone" type="tel" placeholder="S·ªë ƒëi·ªán tho·∫°i" class="form-input">
    <textarea id="address" placeholder="ƒê·ªãa ch·ªâ giao h√†ng" class="form-input"></textarea>

    <label style="font-weight:bold;margin-bottom:6px;display:block;font-size:15px;">Ch·ªçn Size</label>
    <div id="size-container" style="display:flex;flex-wrap:wrap;gap:8px;margin-bottom:16px;"></div>

    <label style="font-weight:bold;margin-bottom:6px;display:block;font-size:15px;">S·ªë l∆∞·ª£ng</label>
    <div style="position:relative;margin-bottom:20px;">
      <div id="qty-selected" style="padding:11px 14px;border-radius:12px;background:white;box-shadow:0 0 0 1px #d1d5db;cursor:pointer;user-select:none;font-size:15px;transition:box-shadow .15s ease;">
        Ch·ªçn s·ªë l∆∞·ª£ng
      </div>
      <div id="qty-dropdown" style="display:none;position:absolute;top:calc(100% + 6px);left:0;right:0;background:white;border-radius:12px;box-shadow:0 10px 24px rgba(15,23,42,0.16);max-height:140px;overflow-y:auto;z-index:10;"></div>
    </div>

    <div id="price-summary" style="display:none;background:#fff;border-radius:14px;padding:14px 16px;box-shadow:0 8px 20px rgba(15,23,42,0.12);margin-bottom:18px;">
      <div style="font-size:15px;margin-bottom:6px;">T·∫°m t√≠nh: <b id="subtotal">0‚Ç´</b></div>
      <div style="font-size:15px;margin-bottom:6px;color:#e53935;">Gi·∫£m gi√° 35%: <b id="discount">-0‚Ç´</b></div>
      <div style="font-size:17px;font-weight:bold;margin-bottom:6px;">T·ªïng thanh to√°n: <span id="total" style="color:#16a34a;">0‚Ç´</span></div>
      <div style="color:#16a34a;font-size:14px;">üöö Free Ship to√†n qu·ªëc</div>
    </div>

    <label style="font-weight:bold;margin-bottom:6px;display:block;font-size:15px;">Ghi ch√∫ (t√πy ch·ªçn)</label>
    <textarea id="note" placeholder="V√≠ d·ª•: Giao bu·ªïi s√°ng, g·ªçi tr∆∞·ªõc khi ƒë·∫øn..." class="form-input"></textarea>

    <button id="submit-btn" style="width:100%;padding:14px;background:#16a34a;color:white;border:none;border-radius:14px;font-size:17px;cursor:pointer;transition:transform .15s ease,box-shadow .15s ease;box-shadow:0 10px 24px rgba(22,163,74,0.45);font-weight:700;">
      G·ª≠i ƒë∆°n h√†ng
    </button>
  </div>
</div>

<!-- SUCCESS POPUP -->
<div id="success-popup">
  <div style="background:white;padding:24px 26px;border-radius:20px;width:80%;max-width:320px;text-align:center;box-shadow:0 14px 32px rgba(15,23,42,0.25);">
    <div class="tick-circle">
      <svg viewBox="0 0 24 24" fill="none" width="40" height="40" aria-hidden="true">
        <path d="M6 12.5l4 4L18 8.5" stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>
    <h3 style="color:#16a34a;margin-top:10px;margin-bottom:4px;">ƒê·∫∑t h√†ng th√†nh c√¥ng!</h3>
    <p style="font-size:14px;color:#4b5563;margin:0;">C·∫£m ∆°n b·∫°n ƒë√£ tin t∆∞·ªüng s·∫£n ph·∫©m c·ªßa c·ª≠a h√†ng.</p>
  </div>
</div>

<!-- VIDEO REVIEW SECTION -->
<div id="videoSection" class="video-section">
  <div class="video-left">
    <video id="reviewVideo" src="video1.mp4" controls muted></video>
  </div>

  <div class="video-right">
    <div class="video-title" id="videoTitle">Kh√°ch TikTok Review S·∫£n Ph·∫©m</div>
    <div class="video-desc" id="videoDesc">
      Video ƒë∆∞·ª£c quay tr·ª±c ti·∫øp b·ªüi kh√°ch sau khi s·ª≠ d·ª•ng.<br>
      Ho√†n to√†n kh√¥ng ch·ªânh s·ª≠a ‚Äì ƒë√∫ng tr·∫£i nghi·ªám th·ª±c t·∫ø.
    </div>

    <div class="video-dots">
      <div class="dot active" data-id="0"></div>
      <div class="dot" data-id="1"></div>
      <div class="dot" data-id="2"></div>
    </div>
  </div>
</div>

<div class="safe-bottom-space"></div>

<script>
document.addEventListener("DOMContentLoaded", function () {
  /* ==================== SLIDER ·∫¢NH S·∫¢N PH·∫®M ==================== */
  const track = document.getElementById("track");
  const slides = document.querySelectorAll(".loop-slide");
  let current = 1;

  function slideWidth() {
    return slides[0].offsetWidth + 16;
  }
  function goTo(index) {
    current = index;
    track.style.transition = "transform .35s ease";
    track.style.transform = `translateX(-${current * slideWidth()}px)`;
    slides.forEach(s => s.classList.remove("active"));
    if (slides[current]) slides[current].classList.add("active");
  }

  // Kh·ªüi t·∫°o
  setTimeout(() => goTo(1), 80);

  // Infinite loop
  track.addEventListener("transitionend", () => {
    const currentSlide = slides[current];
    if (currentSlide && currentSlide.classList.contains("clone")) {
      track.style.transition = "none";
      if (current === slides.length - 1) {
        current = 1;
      } else if (current === 0) {
        current = slides.length - 2;
      }
      track.style.transform = `translateX(-${current * slideWidth()}px)`;
      slides.forEach(s => s.classList.remove("active"));
      slides[current].classList.add("active");
    }
  });

  // Swipe
  let startX = 0;
  track.addEventListener("touchstart", e => {
    startX = e.touches[0].clientX;
  });
  track.addEventListener("touchend", e => {
    const diff = startX - e.changedTouches[0].clientX;
    if (diff > 40) goTo(current + 1);
    else if (diff < -40) goTo(current - 1);
  });

  window.addEventListener("resize", () => {
    track.style.transition = "none";
    track.style.transform = `translateX(-${current * slideWidth()}px)`;
  });

  /* ==================== POPUP ƒê·∫∂T H√ÄNG ==================== */
  const orderPopup = document.getElementById("orderPopup");
  const orderBox = document.getElementById("orderBox");
  const openPopupBtn = document.getElementById("openPopup");

  openPopupBtn.addEventListener("click", () => {
    orderPopup.classList.add("active");
    history.pushState({ popup: true }, "");
  });

  orderPopup.addEventListener("click", (e) => {
    if (!orderBox.contains(e.target)) {
      orderPopup.classList.remove("active");
    }
  });

  // B·∫Øt n√∫t Back: ƒë√≥ng popup n·∫øu ƒëang m·ªü
  window.addEventListener("popstate", function (e) {
    if (orderPopup.classList.contains("active")) {
      orderPopup.classList.remove("active");
    }
  });

  /* ==================== FORM + PRICE + SUBMIT ==================== */
  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwCpEIrkWo_aDGQI3Tek6gKeg2VOTWASXDe59AMRK15kazytqIMrMMAmaYbZ9ynVYmsNA/exec";

  const basePrice = 200000;
  const sizes = ["36","37","38","39","40","41","42"];
  const qtys = ["1","2","3","4","5","6","7","8","9","10"];

  let selectedSizes = [];
  let selectedQty = null;

  const sizeContainer = document.getElementById("size-container");
  const qtySelected = document.getElementById("qty-selected");
  const qtyDropdown = document.getElementById("qty-dropdown");
  const subtotalEl = document.getElementById("subtotal");
  const discountEl = document.getElementById("discount");
  const totalEl = document.getElementById("total");
  const priceSummary = document.getElementById("price-summary");
  const successPopup = document.getElementById("success-popup");

  // Render size
  sizes.forEach(size => {
    const chip = document.createElement("div");
    chip.className = "size-chip";
    chip.textContent = size;

    chip.onclick = () => {
      if (chip.classList.contains("selected")) {
        chip.classList.remove("selected");
        selectedSizes = selectedSizes.filter(s => s !== size);
      } else {
        chip.classList.add("selected");
        selectedSizes.push(size);
      }
    };

    sizeContainer.appendChild(chip);
  });

  // Render quantity
  qtys.forEach(qty => {
    const item = document.createElement("div");
    item.textContent = qty;
    item.style.cssText = "padding:10px 14px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:15px;";
    item.onclick = () => {
      selectedQty = parseInt(qty, 10);
      qtySelected.textContent = "S·ªë l∆∞·ª£ng: " + qty;
      qtyDropdown.style.display = "none";
      updatePrice();
    };
    qtyDropdown.appendChild(item);
  });

  qtySelected.onclick = () => {
    qtyDropdown.style.display = qtyDropdown.style.display === "block" ? "none" : "block";
  };

  document.addEventListener("click", (e) => {
    if (!qtySelected.contains(e.target) && !qtyDropdown.contains(e.target)) {
      qtyDropdown.style.display = "none";
    }
  });

  function updatePrice() {
    if (!selectedQty) return;
    const subtotal = basePrice * selectedQty;
    const discount = subtotal * 0.35;
    const total = subtotal - discount;

    subtotalEl.textContent = subtotal.toLocaleString("vi-VN") + "‚Ç´";
    discountEl.textContent = "-" + discount.toLocaleString("vi-VN") + "‚Ç´";
    totalEl.textContent = total.toLocaleString("vi-VN") + "‚Ç´";

    priceSummary.style.display = "block";
  }

  document.getElementById("submit-btn").onclick = () => {
    const name = document.getElementById("name").value.trim();
    const phone = document.getElementById("phone").value.trim();
    const address = document.getElementById("address").value.trim();
    const note = document.getElementById("note").value.trim();

    if (!name) return alert("Vui l√≤ng nh·∫≠p t√™n kh√°ch h√†ng");
    if (!phone) return alert("Vui l√≤ng nh·∫≠p s·ªë ƒëi·ªán tho·∫°i");
    if (!address) return alert("Vui l√≤ng nh·∫≠p ƒë·ªãa ch·ªâ");
    if (selectedSizes.length === 0) return alert("Vui l√≤ng ch·ªçn size");
    if (!selectedQty) return alert("Vui l√≤ng ch·ªçn s·ªë l∆∞·ª£ng");

    orderPopup.classList.remove("active");
    successPopup.style.display = "flex";

    fetch(SCRIPT_URL, {
      method: "POST",
      body: new URLSearchParams({
        name, phone, address,
        sizes: selectedSizes.join(", "),
        quantity: selectedQty,
        note
      })
    }).catch(() => {});

    setTimeout(() => {
      successPopup.style.display = "none";
      document.querySelectorAll(".form-input").forEach(e => { e.value = ""; });
      selectedSizes = [];
      selectedQty = null;
      document.querySelectorAll(".size-chip").forEach(c => c.classList.remove("selected"));
      qtySelected.textContent = "Ch·ªçn s·ªë l∆∞·ª£ng";
      priceSummary.style.display = "none";
    }, 3500);
  };

  /* ==================== TAB SWITCH ==================== */
  const tabBtns = document.querySelectorAll(".tab-btn");
  const tabContents = document.querySelectorAll(".tab-content");

  tabBtns.forEach(btn => {
    btn.onclick = () => {
      document.querySelector(".tab-btn.active").classList.remove("active");
      btn.classList.add("active");

      const target = document.getElementById("tab-" + btn.dataset.tab);

      tabContents.forEach(c => {
        c.classList.remove("active");
        c.style.display = "none";
      });

      target.style.display = "block";
      setTimeout(() => {
        target.classList.add("active");
      }, 10);
    };
  });

  /* ==================== ZOOM ·∫¢NH ƒê√ÅNH GI√Å ==================== */
  const zoomOverlay = document.getElementById("zoomOverlay");
  const zoomImage = document.getElementById("zoomImage");

  document.querySelectorAll(".zoom-img").forEach(img => {
    img.addEventListener("click", () => {
      zoomImage.src = img.src;
      zoomOverlay.style.display = "flex";
    });
  });

  zoomOverlay.addEventListener("click", () => {
    zoomOverlay.style.display = "none";
  });

  /* ==================== FADE SCROLL KH·ªêI ƒê√ÅNH GI√Å ==================== */
  const fadeScroll = document.querySelector(".fade-scroll");
  if (fadeScroll) {
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          fadeScroll.classList.add("show");
          observer.unobserve(fadeScroll);
        }
      });
    }, { threshold: 0.2 });
    observer.observe(fadeScroll);
  }

  /* ==================== REVIEW SLIDER ‚Äì INFINITE LOOP ==================== */
  const reviewTrack = document.getElementById("reviewTrack");
  let reviewSlides = document.querySelectorAll(".review-slide");

  const firstClone = reviewSlides[0].cloneNode(true);
  const lastClone = reviewSlides[reviewSlides.length - 1].cloneNode(true);
  firstClone.classList.add("clone");
  lastClone.classList.add("clone");

  reviewTrack.appendChild(firstClone);
  reviewTrack.insertBefore(lastClone, reviewSlides[0]);

  reviewSlides = document.querySelectorAll(".review-slide");

  let reviewIndex = 1;
  let reviewWidth = reviewSlides[0].offsetWidth;

  reviewTrack.style.transform = `translateX(-${reviewWidth * reviewIndex}px)`;

  function goReview(i) {
    reviewIndex = i;
    reviewTrack.style.transition = "transform .35s ease";
    reviewTrack.style.transform = `translateX(-${reviewWidth * reviewIndex}px)`;
  }

  reviewTrack.addEventListener("transitionend", () => {
    if (reviewSlides[reviewIndex].classList.contains("clone")) {
      reviewTrack.style.transition = "none";
      if (reviewIndex === reviewSlides.length - 1) {
        reviewIndex = 1;
      }
      if (reviewIndex === 0) {
        reviewIndex = reviewSlides.length - 2;
      }
      reviewTrack.style.transform = `translateX(-${reviewWidth * reviewIndex}px)`;
    }
  });

  window.addEventListener("resize", () => {
    reviewWidth = reviewSlides[0].offsetWidth;
    reviewTrack.style.transition = "none";
    reviewTrack.style.transform = `translateX(-${reviewWidth * reviewIndex}px)`;
  });

  document.getElementById("btnMore").onclick = () => {
    goReview(reviewIndex + 1);
  };

  let startRX = 0;
  reviewTrack.addEventListener("touchstart", e => {
    startRX = e.touches[0].clientX;
  });
  reviewTrack.addEventListener("touchend", e => {
    const diff = startRX - e.changedTouches[0].clientX;
    if (diff > 40) goReview(reviewIndex + 1);
    if (diff < -40) goReview(reviewIndex - 1);
  });

  /* ==================== NOTICE BAR T·ª∞ ƒê·ªòNG ==================== */
  const noticeMessages = [
    "üéâ  ∆ØU ƒê√ÉI GI·ªú V√ÄNG GI·∫®M 35%",
    "üöö ∆ØU ƒê√ÉI ƒê·∫∂C BI·ªÜT ‚Ä¢ FREE SHIP TO√ÄN QU·ªêC",
    "üß§ NH·∫¨N QU√Ä THI·∫æT TH·ª∞C ‚Ä¢ ƒê√îI GƒÇNG TAY LAO ƒê·ªòNG",
    "üíö XIN C·∫¢M ∆†N QU√ù KH√ÅCH ƒê√É ƒê·ªíNG H√ÄNH"
  ];
  let noticeIndex = 0;
  const bar = document.getElementById("topNoticeBar");
  const txt = document.getElementById("noticeText");

  function runNotice() {
    txt.textContent = noticeMessages[noticeIndex];
    txt.classList.add("showText");
    bar.classList.add("show");

    setTimeout(() => {
      txt.classList.remove("showText");
      bar.classList.remove("show");

      setTimeout(() => {
        noticeIndex = (noticeIndex + 1) % noticeMessages.length;
        runNotice();
      }, 500);
    }, 5000);
  }
  setTimeout(runNotice, 600);

  /* ==================== FLOATING ORDER BUTTON LOGIC ==================== */
  const floatingBtn = document.getElementById("floatingOrderBtn");
  const mainOrderBtn = document.getElementById("openPopup");

  floatingBtn.classList.add("show");

  function updateFloatingBtn() {
    const rect = mainOrderBtn.getBoundingClientRect();
    if (rect.top < window.innerHeight && rect.bottom > 0) {
      floatingBtn.classList.remove("show");
    } else {
      floatingBtn.classList.add("show");
    }
  }

  window.addEventListener("scroll", updateFloatingBtn);
  window.addEventListener("load", updateFloatingBtn);

  floatingBtn.onclick = () => mainOrderBtn.click();

  /* ==================== AUTO PURCHASE POPUP ==================== */
  const purchasePopup = document.getElementById("purchasePopup");
  const purchaseName = document.getElementById("purchaseName");
  const purchaseAvatar = document.getElementById("purchaseAvatar");
  const names = [
    "Nguy·ªÖn Minh", "H·ªìng √Ånh", "Thanh S∆°n", "Tr√† My", "T·∫•n Ph√°t",
    "Qu·ª≥nh Nh∆∞", "B√≠ch H·∫±ng", "Minh T√¢m", "ƒêƒÉng Qu√¢n", "Thu√Ω Vy",
    "B·∫£o Ng·ªçc", "Th√†nh Nh√¢n", "Ki·ªÅu My", "H·ªØu Ph√°t", "Gia H√¢n"
  ];
  let lastName = null;

  function randomDelay(min, max) {
    return Math.floor(Math.random() * (max - min + 1) + min) * 1000;
  }

  function scheduleNextPopup() {
    const delay = randomDelay(12, 25);
    setTimeout(showPurchasePopup, delay);
  }

  function showPurchasePopup() {
    if (orderPopup.classList.contains("active")) {
      scheduleNextPopup();
      return;
    }

    let name;
    do {
      name = names[Math.floor(Math.random() * names.length)];
    } while (name === lastName);
    lastName = name;
    purchaseName.textContent = name;

    purchaseAvatar.src = `https://i.pravatar.cc/80?img=${Math.floor(Math.random() * 50) + 10}`;

    purchasePopup.classList.add("show");
    setTimeout(() => {
      purchasePopup.classList.remove("show");
    }, 4000);

    scheduleNextPopup();
  }

  setTimeout(showPurchasePopup, 2500);

  /* ==================== RATING LIQUID CLICK ==================== */
  const ratingLiquid = document.getElementById("rating-liquid");
  ratingLiquid.addEventListener("click", () => {
    ratingLiquid.classList.add("fill");
    ratingLiquid.style.transform = "scale(0.96)";
    setTimeout(() => {
      ratingLiquid.style.transform = "scale(1)";
    }, 180);

    document.getElementById("reviewSection").scrollIntoView({
      behavior: "smooth",
      block: "start"
    });

    setTimeout(() => ratingLiquid.classList.remove("fill"), 1200);
  });

  /* ==================== FLASH SALE COUNTDOWN (2H / NG√ÄY) ==================== */
  (function () {
    const DAY_KEY = "flashSaleDay";
    const START_KEY = "flashSale2HourStart";
    const duration = 2 * 60 * 60 * 1000;

    const todayStr = new Date().toISOString().slice(0, 10);

    let savedDay = localStorage.getItem(DAY_KEY);
    let startTime = localStorage.getItem(START_KEY);

    if (!savedDay || savedDay !== todayStr) {
      localStorage.setItem(DAY_KEY, todayStr);
      startTime = Date.now();
      localStorage.setItem(START_KEY, startTime);
    } else {
      if (!startTime) {
        startTime = Date.now();
        localStorage.setItem(START_KEY, startTime);
      } else {
        startTime = parseInt(startTime, 10);
      }
    }

    const countdownEl = document.getElementById("countdown");
    const flashSaleBox = document.getElementById("flash-sale");

    function updateCountdown() {
      const now = Date.now();
      const elapsed = now - startTime;
      const remaining = duration - elapsed;

      if (remaining <= 0) {
        countdownEl.innerText = "00:00:00";
        flashSaleBox.style.opacity = "0.65";
        return;
      }

      const hours = Math.floor(remaining / (1000 * 60 * 60));
      const mins = Math.floor((remaining / (1000 * 60)) % 60);
      const secs = Math.floor((remaining / 1000) % 60);

      countdownEl.innerText =
        String(hours).padStart(2, "0") + ":" +
        String(mins).padStart(2, "0") + ":" +
        String(secs).padStart(2, "0");
    }

    updateCountdown();
    setInterval(updateCountdown, 1000);
  })();

  /* ==================== VIDEO REVIEW CONTROLLER ==================== */
  const videos = [
    {
      src: "video1.mp4",
      title: "Kh√°ch TikTok Review S·∫£n Ph·∫©m",
      desc: "Video ƒë∆∞·ª£c quay tr·ª±c ti·∫øp b·ªüi kh√°ch sau khi s·ª≠ d·ª•ng.\nHo√†n to√†n kh√¥ng ch·ªânh s·ª≠a ‚Äì ƒë√∫ng tr·∫£i nghi·ªám th·ª±c t·∫ø."
    },
    {
      src: "video2.mp4",
      title: "Tr·∫£i nghi·ªám th·ª±c t·∫ø ngo√†i ƒë·ªìng",
      desc: "Kh√°ch ghi l·∫°i qu√° tr√¨nh d√πng s·∫£n ph·∫©m khi ƒëi ru·ªông ‚Äì ch·ªëng n∆∞·ªõc v√† gi·ªØ ·∫•m r·∫•t t·ªët."
    },
    {
      src: "video3.mp4",
      title: "Review th·∫≠t ‚Äì kh√¥ng booking",
      desc: "Kh√°ch h√†ng t·ª± quay, chia s·∫ª c·∫£m nh·∫≠n ch√¢n th·ª±c sau v√†i ng√†y d√πng."
    }
  ];

  const videoEl = document.getElementById("reviewVideo");
  const titleEl = document.getElementById("videoTitle");
  const descEl = document.getElementById("videoDesc");
  const dots = document.querySelectorAll(".dot");

  dots.forEach(dot => {
    dot.addEventListener("click", () => {
      dots.forEach(d => d.classList.remove("active"));
      dot.classList.add("active");

      const id = parseInt(dot.dataset.id, 10);
      const v = videos[id];

      videoEl.src = v.src;
      titleEl.textContent = v.title;
      descEl.innerHTML = v.desc.replace(/\n/g, "<br>");
    });
  });

  /* ==================== VIDEO SECTION SCROLL EFFECT ==================== */
  const videoSection = document.getElementById("videoSection");
  if (videoSection) {
    const videoObs = new IntersectionObserver(entries => {
      if (entries[0].isIntersecting) {
        videoSection.classList.add("show");
        videoObs.unobserve(videoSection);
      }
    }, { threshold: 0.2 });
    videoObs.observe(videoSection);
  }
});
</script>

</body>
</html>
